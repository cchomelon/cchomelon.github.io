---
layout: base.njk
title: Home
han: false
---

{% set posts = collections.post | reverse %}
{% set categoryGroups = posts | groupByCategory %}
{% set latest = posts | first %}
{% set statusMarkdown = "**Status**: I am in your extended network." %}

<div class="profile-header">
  <div class="profile-name">
    <span class="font-comic">schizo</span><span class="font-mono">posting</span>
  </div>
  <div class="profile-status"><span class="font-DOS">0x5F3759DF</span></div>
</div>

<div class="columns">
  <aside class="sidebar">
    <div class="panel">
      <div class="panel-title">About</div>
      <div class="panel-body">
        <div class="profile-card">
          <div class="profile-photo">
            <img src="{{ '/assets/images/profile.jpeg' | url }}" alt="Jack" class="profile-photo-img">
          </div>
          <div class="profile-meta">
            <div>Jack,</div>
            <div>melon,</div>
            <div>Bebubebu</div>
          </div>
        </div>
        <div class="profile-links">
          <a href="#">View Pics</a>
        </div>
        <div class="status-note">
          {{ statusMarkdown | markdownify | safe }}
        </div>
      </div>
    </div>

    <details class="panel toc-panel" open>
      <summary class="panel-title">Table of Contents</summary>
      <div class="panel-body">
        {% for post in posts %}
          {% set postId = "post-" + post.fileSlug %}
          {% set tocItems = post.templateContent | tocFromHtml(postId) %}
          <div class="toc-items{% if post == latest %} is-active{% endif %}" data-post-id="{{ postId }}">
            {% if tocItems and (tocItems | length) %}
              <ul class="toc-list">
                {% for item in tocItems %}
                  <li class="toc-item level-{{ item.level }}">
                    <a href="#{{ item.id }}">{{ item.text }}</a>
                  </li>
                {% endfor %}
              </ul>
            {% else %}
              <div class="toc-empty">No headings yet.</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </details>

    <details class="panel collapse-panel" open>
      <summary class="panel-title">Blog Index</summary>
      <div class="panel-body">
        <div class="category-list">
          {% for group in categoryGroups %}
            <details class="category-group" open data-ui="plain">
              <summary class="category-title">{{ group.category }}</summary>
              <ul class="post-list">
                {% for post in group.items %}
                  {% set postId = "post-" + post.fileSlug %}
                  <li class="post-item">
                    <div class="post-date">{{ post.date | utcDate }}</div>
                    <a
                      class="post-link{% if post == latest %} is-active{% endif %}"
                      href="#{{ postId }}"
                      data-post-id="{{ postId }}"
                    >
                      {{ post.data.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </details>
          {% endfor %}
        </div>
      </div>
    </details>
  </aside>

  <main class="content">
    <div class="panel">
      <div class="panel-title">Latest Blog Entry</div>
      <div class="panel-body">
        {% if latest %}
          <div class="post-panels">
            {% for post in posts %}
              {% set postId = "post-" + post.fileSlug %}
              {% set typography = post.data.categories | typographyConfig %}
              <article class="post-panel{% if post == latest %} is-active{% endif %}" id="{{ postId }}">
                <h1 class="latest-title">{{ post.data.title }}</h1>
                <div class="latest-date">
                  {{ post.date | utcDate }}
                  <span class="latest-category">
                    Category:
                    {% if post.data.categories %}
                      {% if post.data.categories | length %}
                        {{ post.data.categories | join(", ") }}
                      {% else %}
                        {{ post.data.categories }}
                      {% endif %}
                    {% else %}
                      Uncategorized
                    {% endif %}
                  </span>
                </div>
                {% if typography.useHan %}
                  <div class="latest-content han-init-context{% if typography.hanClass %} {{ typography.hanClass }}{% endif %}">
                    {{ post.templateContent | prefixHeadings(postId) | safe }}
                  </div>
                {% else %}
                  <div class="latest-content {{ typography.wrapperClass }}">
                    {{ post.templateContent | prefixHeadings(postId) | safe }}
                  </div>
                {% endif %}
              </article>
            {% endfor %}
          </div>
        {% else %}
          <p>No posts yet.</p>
        {% endif %}
      </div>
    </div>
  </main>
</div>

<script>
  (function () {
    const panels = document.querySelectorAll(".post-panel");
    const tocBlocks = document.querySelectorAll(".toc-items");
    const links = document.querySelectorAll(".post-link");
    if (!panels.length) return;

    const panelIds = new Set(Array.from(panels).map((panel) => panel.id));
    const activate = (id) => {
      panels.forEach((panel) => {
        panel.classList.toggle("is-active", panel.id === id);
      });
      tocBlocks.forEach((block) => {
        block.classList.toggle("is-active", block.dataset.postId === id);
      });
      links.forEach((link) => {
        link.classList.toggle("is-active", link.dataset.postId === id);
      });
    };

    const hashId = window.location.hash.slice(1);
    const initial = panelIds.has(hashId) ? hashId : panels[0].id;
    activate(initial);

    links.forEach((link) => {
      link.addEventListener("click", (event) => {
        event.preventDefault();
        const id = link.dataset.postId;
        if (!id) return;
        history.replaceState(null, "", `#${id}`);
        activate(id);
      });
    });

    window.addEventListener("hashchange", () => {
      const id = window.location.hash.slice(1);
      if (panelIds.has(id)) activate(id);
    });
  })();
</script>
